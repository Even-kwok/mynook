# Free Canvas æµ‹è¯•æ¸…å•

**æµ‹è¯•æ—¶é—´**: 2025å¹´10æœˆ11æ—¥  
**ç‰ˆæœ¬**: v1.2 - Annotations ä¼˜åŒ–ç‰ˆ

---

## âœ… æµ‹è¯•æ­¥éª¤

### ğŸ“‹ æµ‹è¯• 1: Annotations Onlyï¼ˆæ ‡æ³¨å·¥å…·å•ç‹¬ä½¿ç”¨ï¼‰

**ç›®çš„**: éªŒè¯æ ‡æ³¨å·¥å…·ä¸å†å¡ä½ï¼ŒAI èƒ½æ­£ç¡®ç†è§£

1. [ ] æ‰“å¼€ Free Canvas é¡µé¢
2. [ ] ä¸Šä¼ ä¸€å¼ å¸¦æ°´å°çš„å›¾ç‰‡
3. [ ] é€‰æ‹© **Annotate** å·¥å…·
4. [ ] æ ‡æ³¨ 2 å¤„æ°´å°ä½ç½®ï¼ˆç”»æ¡†ï¼‰
5. [ ] åœ¨æ–‡æœ¬æ¡†è¾“å…¥ï¼š`æ¸…ç†è¿™ä¸¤å¤„æ°´å°`
6. [ ] ç‚¹å‡» **Generate**
7. [ ] **æ‰“å¼€æµè§ˆå™¨ Console (F12)**
8. [ ] æ£€æŸ¥æ—¥å¿—ï¼š
   ```
   ğŸš€ [Generate] Starting generation process
   ğŸ“Š [Generate] Images: 1, Paths: 0, Annotations: 2
   ğŸ·ï¸ [Generate] 2 annotations detected:
     1. "1" - rect (150x200)
     2. "2" - rect (180x180)
   ğŸ“ [Prompt] Strategy: Annotations
   âœ… [Composite] Annotations drawn in <100ms
   âœ… [Composite] Converted in <3000ms
   ```
9. [ ] ç¡®è®¤**ä¸å¡ä½**ï¼Œèƒ½æ­£å¸¸ç”Ÿæˆ
10. [ ] æ£€æŸ¥ç”Ÿæˆçš„å›¾ç‰‡ï¼š
    - [ ] æ°´å°å·²è¢«æ¸…ç†
    - [ ] æ¡†å’Œç¼–å·å·²è¢«å®Œå…¨ç§»é™¤

**é¢„æœŸç»“æœ**: âœ… ä¸å¡ä½ + AI ç†è§£å¹¶ç§»é™¤æ ‡è®°

---

### ğŸ“‹ æµ‹è¯• 2: Draw + Annotateï¼ˆç»„åˆä½¿ç”¨ï¼‰

**ç›®çš„**: éªŒè¯ Draw å’Œ Annotate ç»„åˆæ—¶ AI çš„ç†è§£

1. [ ] æ‰“å¼€ Free Canvas é¡µé¢
2. [ ] ä¸Šä¼ ä¸€å¼ å›¾ç‰‡
3. [ ] é€‰æ‹© **Draw** å·¥å…·
4. [ ] ç”»ä¸€äº›è¾…åŠ©æ ‡è®°ï¼ˆä¾‹å¦‚ï¼šåœˆå‡ºè¦ä¿®æ”¹çš„åŒºåŸŸï¼‰
5. [ ] é€‰æ‹© **Annotate** å·¥å…·
6. [ ] æ ‡æ³¨ 2 å¤„éœ€è¦ç¼–è¾‘çš„ä½ç½®
7. [ ] åœ¨æ–‡æœ¬æ¡†è¾“å…¥ï¼š`æ ¹æ®æ ‡è®°ä¿®æ”¹å›¾ç‰‡`
8. [ ] ç‚¹å‡» **Generate**
9. [ ] æ£€æŸ¥ Console æ—¥å¿—ï¼š
   ```
   ğŸ“ [Prompt] Paths: 3, Annotations: 2, Overlays: 0
   ğŸ“ [Prompt] Strategy: Combined
   ```
10. [ ] ç¡®è®¤ç”Ÿæˆçš„å›¾ç‰‡ï¼š
    - [ ] AI ç†è§£äº†æ‰€æœ‰æ ‡è®°
    - [ ] æ‰€æœ‰æ ‡è®°ï¼ˆæ¡†ã€ç”»ç¬”ï¼‰éƒ½è¢«ç§»é™¤

**é¢„æœŸç»“æœ**: âœ… Strategy: Combined + æ‰€æœ‰æ ‡è®°è¢«æ­£ç¡®å¤„ç†

---

### ğŸ“‹ æµ‹è¯• 3: æ€§èƒ½ç›‘æ§

**ç›®çš„**: ç¡®è®¤æ€§èƒ½ä¼˜åŒ–ç”Ÿæ•ˆ

1. [ ] æ‰§è¡Œæµ‹è¯• 1 æˆ–æµ‹è¯• 2
2. [ ] åœ¨ Console ä¸­æŸ¥æ‰¾ä»¥ä¸‹æ—¥å¿—ï¼š
   ```
   ğŸ·ï¸ [Composite] Drawing X annotations...
   ğŸ·ï¸ [Composite] Ann 1/2: "1" (rect) at (100, 200)
   âœ… [Composite] Annotations drawn in XXms
   ğŸ”„ [Composite] Converting to data URL...
   âœ… [Composite] Converted in XXXms: XXXkb
   ```
3. [ ] æ£€æŸ¥æ—¶é—´ï¼š
   - [ ] Annotations ç»˜åˆ¶ < 100ms âœ…
   - [ ] toDataURL è½¬æ¢ < 3000ms âœ…
   - [ ] å¦‚æœ > 5000msï¼Œä¼šæ˜¾ç¤º âš ï¸ è­¦å‘Š

**é¢„æœŸç»“æœ**: âœ… æ€§èƒ½åœ¨åˆç†èŒƒå›´å†…

---

### ğŸ“‹ æµ‹è¯• 4: è¾“å…¥éªŒè¯

**ç›®çš„**: éªŒè¯åç«¯è¾“å…¥éªŒè¯

#### 4A: å›¾åƒæ•°é‡é™åˆ¶
1. [ ] å°è¯•ä¸Šä¼ æˆ–æ·»åŠ  **è¶…è¿‡ 3 å¼ å›¾åƒ**
2. [ ] ç‚¹å‡» Generate
3. [ ] æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼š
   ```
   Error: Too many images
   Details: Maximum 3 reference images allowed
   ```

**é¢„æœŸç»“æœ**: âœ… è¿”å› 400 é”™è¯¯ï¼Œæç¤ºå›¾åƒæ•°é‡è¶…é™

#### 4B: å›¾åƒå¤§å°é™åˆ¶
1. [ ] ä¸Šä¼ ä¸€å¼  **è¶…è¿‡ 7MB** çš„å›¾åƒ
2. [ ] ç‚¹å‡» Generate
3. [ ] æ£€æŸ¥åç«¯æ—¥å¿—ï¼ˆVercelï¼‰ï¼š
   ```
   âŒ Image 1 too large: 8.5MB (max: 7MB)
   ```
4. [ ] æ£€æŸ¥å‰ç«¯é”™è¯¯ä¿¡æ¯

**é¢„æœŸç»“æœ**: âœ… è¿”å› 400 é”™è¯¯ï¼Œæç¤ºå›¾åƒè¿‡å¤§

---

### ğŸ“‹ æµ‹è¯• 5: é”™è¯¯å¤„ç†

**ç›®çš„**: éªŒè¯å„ç§é”™è¯¯åœºæ™¯çš„å¤„ç†

#### 5A: æ—  prompt
1. [ ] ä¸Šä¼ å›¾ç‰‡ï¼Œä¸è¾“å…¥ prompt
2. [ ] ç‚¹å‡» Generate
3. [ ] æ£€æŸ¥é”™è¯¯æç¤º

#### 5B: ç½‘ç»œé”™è¯¯
1. [ ] åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ–­å¼€ç½‘ç»œ
2. [ ] æ£€æŸ¥é”™è¯¯æç¤ºæ˜¯å¦å‹å¥½

#### 5C: ä¿¡ç”¨ç‚¹ä¸è¶³
1. [ ] ä½¿ç”¨ä¿¡ç”¨ç‚¹ä¸º 0 çš„è´¦å·
2. [ ] å°è¯•ç”Ÿæˆ
3. [ ] æ£€æŸ¥æ˜¯å¦æç¤ºä¿¡ç”¨ç‚¹ä¸è¶³

**é¢„æœŸç»“æœ**: âœ… æ‰€æœ‰é”™è¯¯éƒ½æœ‰æ¸…æ™°æç¤º

---

## ğŸ” è°ƒè¯•æ£€æŸ¥ç‚¹

### å¦‚æœå¡ä½äº†

1. **æ‰“å¼€ Console (F12)**
2. **æ‰¾åˆ°æœ€åä¸€æ¡æ—¥å¿—**ï¼š
   - å¡åœ¨ `ğŸ·ï¸ [Composite] Drawing annotations...` ä¹‹å
     â†’ **åŸå› **: Annotations ç»˜åˆ¶
     â†’ **è§£å†³**: æ£€æŸ¥æ ‡æ³¨æ•°é‡å’Œå›¾åƒå¤§å°
   
   - å¡åœ¨ `ğŸ”„ [Composite] Converting to data URL...` ä¹‹å
     â†’ **åŸå› **: toDataURL è½¬æ¢
     â†’ **è§£å†³**: å›¾åƒå¤ªå¤§ï¼Œéœ€è¦å‹ç¼©
   
   - å¡åœ¨ `ğŸ” [Generate] Step 3: Sending to API...` ä¹‹å
     â†’ **åŸå› **: åç«¯ API é—®é¢˜
     â†’ **è§£å†³**: æŸ¥çœ‹ Vercel æ—¥å¿—

3. **æŸ¥çœ‹ Vercel æ—¥å¿—**:
   - ç™»å½• Vercel Dashboard
   - æ‰¾åˆ° `generate-image` function
   - æŸ¥çœ‹æœ€æ–°æ—¥å¿—
   - å¯»æ‰¾ `âŒ` æ ‡è®°çš„é”™è¯¯

---

## ğŸ“Š é¢„æœŸæ—¥å¿—ç¤ºä¾‹

### å®Œæ•´çš„æˆåŠŸæµç¨‹æ—¥å¿—

```
ğŸš€ [Generate] Starting generation process
ğŸ“Š [Generate] Images: 1, Paths: 3, Annotations: 2
ğŸ·ï¸ [Generate] 2 annotations detected:
  1. "1" - rect (150x200)
  2. "2" - rect (180x180)
ğŸ” [Generate] Step 1: Creating composite
âœ… [Composite] Base image loaded
âœ… [Composite] 0 overlay images loaded
ğŸ·ï¸ [Composite] Drawing 2 annotations...
ğŸ·ï¸ [Composite] Ann 1/2: "1" (rect) at (100, 200)
ğŸ·ï¸ [Composite] Ann 2/2: "2" (rect) at (300, 400)
âœ… [Composite] Annotations drawn in 45ms
ğŸ”„ [Composite] Converting to data URL...
ğŸ“Š [Composite] Canvas: 1024x768 = 0.8MP
âœ… [Composite] Converted in 1250ms: 850KB
âœ… [Generate] Step 1: Complete
ğŸ“ [Prompt] Paths: 3, Annotations: 2, Overlays: 0
ğŸ“ [Prompt] Strategy: Combined
ğŸ” [Generate] Step 2: Validating
âœ… [Generate] Step 2: Complete
ğŸ“Š [Generate] Image size: 850KB
ğŸ” [Generate] Step 3: Sending to API...
âœ… [Generate] Step 3: Complete
```

### åç«¯æ—¥å¿—ï¼ˆVercelï¼‰

```
âœ… Credits deducted for user xxx: -5 (remaining: 95)
ğŸ”§ Initializing Google GenAI client for user xxx...
ğŸ“ Instruction: You are an expert inpainting...
ğŸ“Š Image 1: 0.85MB
ğŸ“¤ Uploaded 1 images, calling Gemini API...
ğŸ¤– Using model: gemini-2.5-flash-image
ğŸ“Š Response size: 1024KB
âœ… Image generated successfully for user xxx
```

---

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

- [ ] **Annotations Only** ä¸å¡ä½ï¼ŒAI æ­£ç¡®ç†è§£
- [ ] **Draw + Annotate** ç»„åˆä½¿ç”¨æ­£å¸¸ï¼Œprompt ç­–ç•¥æ­£ç¡®
- [ ] **æ€§èƒ½ç›‘æ§** æ˜¾ç¤ºåˆç†æ—¶é—´
- [ ] **è¾“å…¥éªŒè¯** æ­£ç¡®æ‹¦æˆªæ— æ•ˆè¾“å…¥
- [ ] **é”™è¯¯å¤„ç†** æä¾›æ¸…æ™°å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- [ ] **æ‰€æœ‰æ ‡è®°** åœ¨ç”Ÿæˆç»“æœä¸­è¢«å®Œå…¨ç§»é™¤

---

## ğŸ› é—®é¢˜æŠ¥å‘Šæ¨¡æ¿

å¦‚æœå‘ç°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

```
**æµ‹è¯•åœºæ™¯**: (æµ‹è¯• 1/2/3/4/5)

**é—®é¢˜æè¿°**: 
(æè¿°å‘ç”Ÿäº†ä»€ä¹ˆ)

**æµè§ˆå™¨ Console æ—¥å¿—**:
(å¤åˆ¶æœ€å 20 è¡Œæ—¥å¿—)

**Vercel æ—¥å¿—** (å¦‚æœæœ‰):
(å¤åˆ¶åç«¯é”™è¯¯æ—¥å¿—)

**æˆªå›¾**:
(å¦‚æœæœ‰è§†è§‰é—®é¢˜ï¼Œæä¾›æˆªå›¾)

**å¤ç°æ­¥éª¤**:
1. 
2. 
3. 
```

---

## ğŸ‰ æµ‹è¯•å®Œæˆ

æ‰€æœ‰æµ‹è¯•é€šè¿‡åï¼ŒFree Canvas åŠŸèƒ½å°±å®Œå…¨æ­£å¸¸äº†ï¼ğŸš€

**ä¸‹ä¸€æ­¥**: 
- åœ¨çœŸå®åœºæ™¯ä¸­ä½¿ç”¨
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ç»§ç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

