# 会员权限控制 - 测试清单

## 测试环境准备

### 1. 测试用户账号
需要准备以下会员等级的测试账号：
- [ ] Free 会员账号
- [ ] Premium 会员账号
- [ ] Business 会员账号

### 2. 数据库确认
- [ ] 确认 `users` 表有 `membership_tier` 字段
- [ ] 确认会员等级值为：'free', 'premium', 'business'

## Free Canvas 功能测试

### Free 会员（权限不足）

#### 导航访问
- [ ] 可以点击侧边栏的 "Free Canvas" 菜单
- [ ] 可以进入 Free Canvas 页面
- [ ] 页面正常显示，无崩溃

#### UI 显示
- [ ] 生成按钮显示锁图标 🔒
- [ ] 按钮样式为灰色（locked 状态）
- [ ] 鼠标悬停时按钮有 hover 效果

#### 交互测试
- [ ] 可以上传图片
- [ ] 可以使用绘图工具
- [ ] 可以添加标注
- [ ] 可以输入提示词
- [ ] 点击生成按钮时：
  - [ ] 弹出升级提示弹窗
  - [ ] 不会真的开始生成
  - [ ] 不会扣除积分

#### 升级弹窗测试
- [ ] 弹窗正确显示
- [ ] 显示当前会员等级 "Free"
- [ ] 显示所需等级 "Premium"
- [ ] 显示功能名称 "Free Canvas"
- [ ] 显示价格信息
- [ ] 显示权益列表（5 项）
- [ ] "立即升级" 按钮可点击
- [ ] 点击 "立即升级" 后：
  - [ ] 关闭弹窗
  - [ ] 跳转到 Pricing 页面
- [ ] "稍后再说" 按钮可点击
- [ ] 点击 "稍后再说" 后：
  - [ ] 关闭弹窗
  - [ ] 停留在当前页面
- [ ] 点击背景遮罩可关闭弹窗
- [ ] 点击右上角 X 按钮可关闭弹窗

#### 动画效果
- [ ] 弹窗打开有淡入和缩放动画
- [ ] 弹窗关闭有淡出动画
- [ ] 动画流畅，无卡顿

### Premium 会员（有权限）

#### UI 显示
- [ ] 生成按钮无锁图标
- [ ] 按钮样式正常（primary 状态，蓝色）
- [ ] 按钮文字显示 "Generate (1 Credit)"

#### 功能测试
- [ ] 可以正常点击生成按钮
- [ ] 不会弹出升级提示
- [ ] 可以正常生成图片
- [ ] 生成成功后扣除积分
- [ ] 生成的图片保存到历史记录

### Business 会员（有权限）

#### 功能测试
- [ ] 与 Premium 会员测试相同
- [ ] 确认所有功能正常工作

## 其他场景测试

### 未登录用户
- [ ] 点击生成按钮时：
  - [ ] 不显示升级弹窗
  - [ ] 显示登录弹窗
  - [ ] 引导用户登录

### 积分不足
- [ ] Premium 会员积分为 0 时
- [ ] 点击生成按钮：
  - [ ] 显示积分不足提示
  - [ ] 不显示升级弹窗（因为已经是 Premium）

## 响应式测试

### 桌面端 (1920x1080)
- [ ] 弹窗居中显示
- [ ] 弹窗宽度适中，不会太宽
- [ ] 所有内容清晰可读

### 平板端 (768x1024)
- [ ] 弹窗适配屏幕
- [ ] 内容不会溢出
- [ ] 按钮大小合适

### 移动端 (375x667)
- [ ] 弹窗占据大部分屏幕
- [ ] 内容垂直滚动（如需要）
- [ ] 按钮易于点击

## 浏览器兼容性

- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

## 边界情况测试

### 网络问题
- [ ] 网络断开时，弹窗仍然可以正常显示和关闭
- [ ] 跳转到 Pricing 页面时网络断开的处理

### 快速点击
- [ ] 快速多次点击锁定按钮：
  - [ ] 只显示一个弹窗
  - [ ] 不会出现多个弹窗叠加

### 会员等级变更
- [ ] 用户从 Free 升级到 Premium 后：
  - [ ] 刷新页面后按钮解锁
  - [ ] 可以正常使用功能

## 性能测试

### 加载性能
- [ ] UpgradeModal 组件懒加载
- [ ] 首次渲染时间 < 100ms
- [ ] 动画帧率 > 60fps

### 内存使用
- [ ] 打开关闭弹窗 10 次后无内存泄漏
- [ ] 组件正确卸载和清理

## 国际化（如适用）

- [ ] 中文显示正确
- [ ] 英文显示正确（如支持）
- [ ] 价格货币符号正确

## 安全性测试

### 权限绕过尝试
- [ ] 直接调用生成 API（后端应拒绝）
- [ ] 修改浏览器 localStorage（应无效）
- [ ] 修改网络请求（后端应验证）

## 用户体验测试

### 文案
- [ ] 所有文案友好、清晰
- [ ] 无拼写错误
- [ ] 无语法错误
- [ ] 提示信息有帮助性

### 视觉设计
- [ ] 颜色对比度足够
- [ ] 字体大小合适
- [ ] 间距舒适
- [ ] 图标清晰可辨

### 交互流程
- [ ] 用户可以轻松理解如何升级
- [ ] 升级路径清晰
- [ ] 关闭弹窗的方式明显

## 数据验证

### 日志记录
- [ ] 用户点击锁定按钮时有日志
- [ ] 显示升级弹窗时有日志
- [ ] 点击升级按钮时有日志

### 分析追踪（如有）
- [ ] 升级弹窗显示次数
- [ ] 升级按钮点击率
- [ ] 转化漏斗数据

## 测试结果

### 测试日期：____________

### 测试人员：____________

### 测试环境：
- 操作系统：____________
- 浏览器：____________
- 会员等级：____________

### 发现的问题：
1. 
2. 
3. 

### 总体评价：
- [ ] 通过
- [ ] 有轻微问题但可接受
- [ ] 需要修复后重新测试

### 备注：

