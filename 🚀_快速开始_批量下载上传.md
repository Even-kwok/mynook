# ğŸš€ å¿«é€Ÿå¼€å§‹ - æ‰¹é‡ä¸‹è½½ä¸ä¸Šä¼ 

**é€‚åˆ**: æƒ³è¦å¿«é€Ÿæµ‹è¯•åŠŸèƒ½çš„ç”¨æˆ·  
**æ—¶é—´**: çº¦ 10 åˆ†é’Ÿ

---

## ğŸ“ å‰ææ¡ä»¶

- âœ… ç½‘ç«™å·²éƒ¨ç½²åˆ° Vercel
- âœ… Supabase é¡¹ç›®å·²é…ç½®
- âœ… æœ‰ Supabase Service Role Key

---

## ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆå¹¶ä¸‹è½½å›¾ç‰‡ (å‰ç«¯)

### 1.1 è®¿é—®ç½‘ç«™
æ‰“å¼€ Vercel é¢„è§ˆé“¾æ¥ï¼ˆç­‰å¾…éƒ¨ç½²å®Œæˆï¼‰

### 1.2 ç”Ÿæˆå›¾ç‰‡
1. ç™»å½•è´¦å·
2. è¿›å…¥ **Interior Design** é¡µé¢
3. ä¸Šä¼ ä¸€å¼ æˆ¿é—´å›¾ç‰‡
4. é€‰æ‹©æˆ¿é—´ç±»å‹ï¼ˆå¦‚ Living Roomï¼‰
5. é€‰æ‹© 2-3 ä¸ªæ¨¡æ¿
6. ç‚¹å‡»ç”Ÿæˆ

### 1.3 æ‰¹é‡ä¸‹è½½
1. æ‰“å¼€å³ä¾§ **My Designs** ä¾§è¾¹æ 
2. æ‰¾åˆ°é¡¶éƒ¨çš„ **"æ‰¹é‡ä¸‹è½½å…¨éƒ¨ (n)"** æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’®
4. ç¡®è®¤ä¸‹è½½
5. ç­‰å¾…æ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œæˆ

**ä¸‹è½½ä½ç½®**: æµè§ˆå™¨é»˜è®¤ä¸‹è½½æ–‡ä»¶å¤¹

**æ–‡ä»¶åç¤ºä¾‹**:
```
style_living-room_modern-minimalist_1728835200000_modern-minimalist.png
style_living-room_scandinavian_1728835201000_scandinavian.png
```

---

## ç¬¬äºŒæ­¥ï¼šå‡†å¤‡ä¸Šä¼  (æœ¬åœ°)

### 2.1 åˆ›å»ºæ–‡ä»¶å¤¹
```bash
cd mynook
mkdir downloaded-images
```

### 2.2 ç§»åŠ¨æ–‡ä»¶
å°†ä¸‹è½½çš„å›¾ç‰‡ç§»åŠ¨åˆ° `downloaded-images/` æ–‡ä»¶å¤¹

**Windows**:
```powershell
move C:\Users\USER\Downloads\style_*.png downloaded-images\
move C:\Users\USER\Downloads\exterior_*.png downloaded-images\
move C:\Users\USER\Downloads\garden_*.png downloaded-images\
```

**Mac/Linux**:
```bash
mv ~/Downloads/style_*.png downloaded-images/
mv ~/Downloads/exterior_*.png downloaded-images/
mv ~/Downloads/garden_*.png downloaded-images/
```

### 2.3 éªŒè¯æ–‡ä»¶
```bash
ls downloaded-images/
# æˆ– Windows: dir downloaded-images\
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ–‡ä»¶ï¼š
```
style_living-room_modern-minimalist_xxx.png
style_bedroom_scandinavian_xxx.png
exterior_house_contemporary_xxx.png
```

---

## ç¬¬ä¸‰æ­¥ï¼šé…ç½® Supabase

### 3.1 åˆ›å»º Storage Bucket

**æ–¹å¼A: åœ¨ Supabase Dashboard**
1. æ‰“å¼€ https://supabase.com/dashboard
2. è¿›å…¥ä½ çš„é¡¹ç›®
3. ç‚¹å‡»å·¦ä¾§ **Storage**
4. ç‚¹å‡» **New Bucket**
5. åç§°: `template-thumbnails`
6. å…¬å¼€è®¿é—®: âœ… å‹¾é€‰ Public
7. ç‚¹å‡» **Create Bucket**

**æ–¹å¼B: ä½¿ç”¨ SQL**
```sql
-- åœ¨ SQL Editor ä¸­æ‰§è¡Œ
INSERT INTO storage.buckets (id, name, public)
VALUES ('template-thumbnails', 'template-thumbnails', true);

-- è®¾ç½®å…¬å¼€è®¿é—®ç­–ç•¥
CREATE POLICY "Public Access"
ON storage.objects FOR SELECT
USING ( bucket_id = 'template-thumbnails' );

-- å…è®¸æœåŠ¡å¯†é’¥ä¸Šä¼ 
CREATE POLICY "Service Role Upload"
ON storage.objects FOR INSERT
WITH CHECK ( bucket_id = 'template-thumbnails' );
```

### 3.2 è·å– Service Role Key

1. åœ¨ Supabase Dashboard
2. ç‚¹å‡»å·¦ä¾§ **Settings** (é½¿è½®å›¾æ ‡)
3. ç‚¹å‡» **API**
4. æ‰¾åˆ° **service_role** key
5. ç‚¹å‡»çœ¼ç›å›¾æ ‡æŸ¥çœ‹
6. å¤åˆ¶å¯†é’¥

**âš ï¸ é‡è¦**: Service Role Key æœ‰å®Œå…¨æƒé™ï¼Œä¸è¦å…¬å¼€ï¼

---

## ç¬¬å››æ­¥ï¼šè¿è¡Œä¸Šä¼ è„šæœ¬

### 4.1 è®¾ç½®ç¯å¢ƒå˜é‡

**Windows PowerShell**:
```powershell
$env:VITE_SUPABASE_URL="https://your-project.supabase.co"
$env:SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"
```

**Mac/Linux**:
```bash
export VITE_SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"
```

### 4.2 è¿è¡Œè„šæœ¬
```bash
npx tsx scripts/upload-thumbnails.ts
```

### 4.3 é¢„æœŸè¾“å‡º
```
ğŸš€ æ‰¹é‡ä¸Šä¼ ç¼©ç•¥å›¾å·¥å…·

ğŸ“ å›¾ç‰‡æ–‡ä»¶å¤¹: /Users/xxx/mynook/downloaded-images
ğŸ—„ï¸  Storage Bucket: template-thumbnails
âœ… ç”Ÿäº§æ¨¡å¼

âœ… Supabase å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ

ğŸ“Š æ‰¾åˆ° 5 ä¸ªå›¾ç‰‡æ–‡ä»¶

[1/5] å¤„ç†: style_living-room_modern-minimalist_xxx.png
   ğŸ“‹ å…ƒæ•°æ®:
      - åŠŸèƒ½ç±»å‹: style
      - æˆ¿é—´ç±»å‹: living-room
      - æ¨¡æ¿ID: modern-minimalist
   ğŸ“¤ ä¸Šä¼ : ... â†’ style/living-room/modern-minimalist_xxx.png
   âœ… ä¸Šä¼ æˆåŠŸ: https://xxx.supabase.co/...
   âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ: Modern Minimalist

...

ğŸ“Š ä¸Šä¼ ç»Ÿè®¡

æ€»æ–‡ä»¶æ•°: 5
âœ… ä¸Šä¼ æˆåŠŸ: 5
âŒ ä¸Šä¼ å¤±è´¥: 0
âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ: 5
âŒ æ•°æ®åº“æ›´æ–°å¤±è´¥: 0

âœ¨ å®Œæˆ!
```

---

## ç¬¬äº”æ­¥ï¼šéªŒè¯ç»“æœ

### 5.1 æ£€æŸ¥ Storage

1. æ‰“å¼€ Supabase Dashboard â†’ Storage
2. ç‚¹å‡» `template-thumbnails` bucket
3. åº”è¯¥çœ‹åˆ°æŒ‰ç±»å‹å’Œæˆ¿é—´åˆ†ç±»çš„æ–‡ä»¶å¤¹ç»“æ„ï¼š

```
template-thumbnails/
â”œâ”€â”€ style/
â”‚   â””â”€â”€ living-room/
â”‚       â”œâ”€â”€ modern-minimalist_xxx.png
â”‚       â””â”€â”€ scandinavian_xxx.png
â”œâ”€â”€ exterior/
â”‚   â””â”€â”€ house/
â”‚       â””â”€â”€ contemporary_xxx.png
â””â”€â”€ garden/
    â””â”€â”€ no-room/
        â””â”€â”€ japanese-zen-garden_xxx.png
```

### 5.2 æ£€æŸ¥æ•°æ®åº“

åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š
```sql
SELECT id, name, image_url, room_type
FROM design_templates
WHERE image_url IS NOT NULL
ORDER BY updated_at DESC
LIMIT 10;
```

åº”è¯¥çœ‹åˆ° `image_url` å­—æ®µå·²è¢«æ›´æ–°ã€‚

### 5.3 æµ‹è¯•å›¾ç‰‡è®¿é—®

å¤åˆ¶ä¸€ä¸ª `image_url`ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼Œåº”è¯¥èƒ½çœ‹åˆ°å›¾ç‰‡ã€‚

---

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸå®Œæˆäº†ç¬¬ä¸€æ¬¡æ‰¹é‡ä¸‹è½½å’Œä¸Šä¼ ï¼

**ç°åœ¨ä½ å¯ä»¥**:
- âœ… åœ¨å‰ç«¯ç”Ÿæˆå›¾ç‰‡
- âœ… ä¸€é”®æ‰¹é‡ä¸‹è½½
- âœ… æ‰¹é‡ä¸Šä¼ åˆ° Supabase
- âœ… è‡ªåŠ¨æ›´æ–°æ¨¡æ¿ç¼©ç•¥å›¾

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: æµè§ˆå™¨é˜»æ­¢äº†ä¸‹è½½ï¼Ÿ
**A**: ç‚¹å‡»åœ°å€æ å³ä¾§çš„ä¸‹è½½å›¾æ ‡ï¼Œé€‰æ‹©"å…è®¸å¤šæ¬¡ä¸‹è½½"

### Q: è„šæœ¬æŠ¥é”™æ‰¾ä¸åˆ°æ–‡ä»¶å¤¹ï¼Ÿ
**A**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œè„šæœ¬ï¼Œå¹¶ä¸” `downloaded-images/` æ–‡ä»¶å¤¹å­˜åœ¨

### Q: ä¸Šä¼ å¤±è´¥ "Missing environment variables"ï¼Ÿ
**A**: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼Œæ³¨æ„ PowerShell å’Œ Bash çš„è¯­æ³•ä¸åŒ

### Q: æ•°æ®åº“æœªæ›´æ–°ï¼Ÿ
**A**: æ£€æŸ¥æ¨¡æ¿ ID æ˜¯å¦åŒ¹é…ã€‚æ–‡ä»¶åä¸­çš„ `templateId` åº”è¯¥ä¸æ•°æ®åº“ä¸­çš„ `id` å­—æ®µä¸€è‡´

### Q: å›¾ç‰‡ä¸Šä¼ æˆåŠŸä½†æ— æ³•è®¿é—®ï¼Ÿ
**A**: ç¡®ä¿ Storage Bucket è®¾ç½®ä¸ºå…¬å¼€è®¿é—® (Public)

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

éœ€è¦æ›´å¤šä¿¡æ¯ï¼ŸæŸ¥çœ‹è¿™äº›æ–‡æ¡£ï¼š

- **âœ…_æ‰¹é‡ä¸‹è½½ä¸Šä¼ åŠŸèƒ½å®Œæˆ_2025_10_13.md** - åŠŸèƒ½è¯¦ç»†è¯´æ˜
- **ğŸ“¦_æ‰¹é‡ä¸‹è½½ä¸Šä¼ å·¥ä½œæµç¨‹_2025_10_13.md** - å®Œæ•´å·¥ä½œæµç¨‹
- **å›¾ç‰‡è·¯å¾„ä¿¡æ¯æµ‹è¯•æŒ‡å—_2025_10_13.md** - æµ‹è¯•æ­¥éª¤

---

## ğŸ”§ æµ‹è¯•æ¨¡å¼

å¦‚æœæƒ³å…ˆæµ‹è¯•ä¸å®é™…ä¸Šä¼ ï¼Œç¼–è¾‘ `scripts/upload-thumbnails.ts`:

```typescript
// è®¾ç½®ä¸º true å¯ç”¨æµ‹è¯•æ¨¡å¼
const DRY_RUN = true;
```

ç„¶åè¿è¡Œè„šæœ¬ï¼Œä¼šæ˜¾ç¤ºè§£æä¿¡æ¯ä½†ä¸å®é™…ä¸Šä¼ ã€‚

---

## ğŸ¯ ä¸‹æ¬¡ä½¿ç”¨

ä¸‹æ¬¡ä½¿ç”¨æ—¶ï¼Œåªéœ€è¦ï¼š

1. å‰ç«¯ç”Ÿæˆå›¾ç‰‡
2. ç‚¹å‡»"æ‰¹é‡ä¸‹è½½å…¨éƒ¨"
3. ç§»åŠ¨æ–‡ä»¶åˆ° `downloaded-images/`
4. è¿è¡Œ `npx tsx scripts/upload-thumbnails.ts`

å°±è¿™ä¹ˆç®€å•ï¼ ğŸš€

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

