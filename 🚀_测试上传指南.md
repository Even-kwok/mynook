# ğŸš€ æµ‹è¯•ä¸Šä¼ ç¼©ç•¥å›¾ - å¿«é€ŸæŒ‡å—

**æ—¥æœŸ**: 2025å¹´10æœˆ13æ—¥  
**æ–‡ä»¶ä½ç½®**: `upload/` æ–‡ä»¶å¤¹  
**ç›®æ ‡**: ä¸Šä¼ 3å¼ å›¾ç‰‡åˆ° Supabase ä½œä¸ºæ¨¡æ¿ç¼©ç•¥å›¾

---

## ğŸ“‹ æ–‡ä»¶æ¸…å•

ä½ çš„ `upload/` æ–‡ä»¶å¤¹ä¸­æœ‰3ä¸ªæ–‡ä»¶ï¼š

1. **Latte___Creamy_Style_Living_Room_1760359717742.png** (2.1 MB)
   - æ¨¡æ¿: Latte / Creamy Style Living Room
   - ID: `1df50169-533c-4745-9157-902b9e55ffe8`

2. **style_living-room_latte-creamy-style-living-room_1760360118928.png** (2.0 MB)
   - æ¨¡æ¿: Latte / Creamy Style Living Room
   - ID: `1df50169-533c-4745-9157-902b9e55ffe8`

3. **style_living-room_organic-modern-living-room_1760360118928.png** (2.4 MB)
   - æ¨¡æ¿: Organic Modern Living Room
   - ID: `18f2c806-f0f5-435c-acea-e3036c6a16ac`

---

## ğŸ”§ ä¸Šä¼ æ­¥éª¤

### æ­¥éª¤1ï¼šè·å– Supabase é…ç½®

1. æ‰“å¼€ https://supabase.com/dashboard
2. è¿›å…¥ä½ çš„é¡¹ç›®
3. ç‚¹å‡»å·¦ä¾§ **Settings** (é½¿è½®å›¾æ ‡)
4. ç‚¹å‡» **API**
5. å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Project URL** (ä¾‹å¦‚: `https://xxxxx.supabase.co`)
   - **service_role key** (ç‚¹å‡»çœ¼ç›å›¾æ ‡æŸ¥çœ‹)

### æ­¥éª¤2ï¼šåˆ›å»º Storage Bucketï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

åœ¨ Supabase Dashboard:
1. ç‚¹å‡»å·¦ä¾§ **Storage**
2. å¦‚æœæ²¡æœ‰ `template-thumbnails` bucketï¼Œç‚¹å‡» **New Bucket**
3. åç§°: `template-thumbnails`
4. å…¬å¼€è®¿é—®: âœ… å‹¾é€‰ Public
5. ç‚¹å‡» **Create**

æˆ–åœ¨ SQL Editor æ‰§è¡Œï¼š
```sql
-- åˆ›å»º bucket
INSERT INTO storage.buckets (id, name, public)
VALUES ('template-thumbnails', 'template-thumbnails', true)
ON CONFLICT (id) DO NOTHING;

-- è®¾ç½®å…¬å¼€è®¿é—®ç­–ç•¥
CREATE POLICY IF NOT EXISTS "Public Access"
ON storage.objects FOR SELECT
USING ( bucket_id = 'template-thumbnails' );

-- å…è®¸æœåŠ¡å¯†é’¥ä¸Šä¼ 
CREATE POLICY IF NOT EXISTS "Service Role Upload"
ON storage.objects FOR INSERT
WITH CHECK ( bucket_id = 'template-thumbnails' );
```

### æ­¥éª¤3ï¼šè®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡Œ

åœ¨ PowerShell ä¸­è¿è¡Œï¼š

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\USER\Desktop\mynook

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ›¿æ¢æˆä½ çš„å®é™…å€¼ï¼‰
$env:VITE_SUPABASE_URL="https://your-project.supabase.co"
$env:SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# è¿è¡Œä¸Šä¼ è„šæœ¬
npx tsx scripts/upload-test-thumbnails.ts
```

### é¢„æœŸè¾“å‡º

```
ğŸš€ æµ‹è¯•ä¸Šä¼ ç¼©ç•¥å›¾å·¥å…·

âœ… Supabase å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ

ğŸ“Š æ‰¾åˆ° 3 ä¸ªå›¾ç‰‡æ–‡ä»¶

[1/3] å¤„ç†: Latte___Creamy_Style_Living_Room_1760359717742.png
   ğŸ“‹ æ¨¡æ¿: Latte / Creamy Style Living Room
   ğŸ”‘ ID: 1df50169-533c-4745-9157-902b9e55ffe8
   ğŸ“¤ ä¸Šä¼ åˆ°: style/living-room/1df50169-533c-4745-9157-902b9e55ffe8.png
   âœ… ä¸Šä¼ æˆåŠŸ: https://xxx.supabase.co/storage/v1/...
   âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ

[2/3] å¤„ç†: style_living-room_latte-creamy-style-living-room_1760360118928.png
   ğŸ“‹ æ¨¡æ¿: Latte / Creamy Style Living Room
   ğŸ”‘ ID: 1df50169-533c-4745-9157-902b9e55ffe8
   ğŸ“¤ ä¸Šä¼ åˆ°: style/living-room/1df50169-533c-4745-9157-902b9e55ffe8.png
   âœ… ä¸Šä¼ æˆåŠŸ: https://xxx.supabase.co/storage/v1/...
   âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ

[3/3] å¤„ç†: style_living-room_organic-modern-living-room_1760360118928.png
   ğŸ“‹ æ¨¡æ¿: Organic Modern Living Room
   ğŸ”‘ ID: 18f2c806-f0f5-435c-acea-e3036c6a16ac
   ğŸ“¤ ä¸Šä¼ åˆ°: style/living-room/18f2c806-f0f5-435c-acea-e3036c6a16ac.png
   âœ… ä¸Šä¼ æˆåŠŸ: https://xxx.supabase.co/storage/v1/...
   âœ… æ•°æ®åº“æ›´æ–°æˆåŠŸ


ğŸ“Š ä¸Šä¼ ç»Ÿè®¡

æ€»æ–‡ä»¶æ•°: 3
âœ… æˆåŠŸ: 3
âŒ å¤±è´¥: 0

âœ¨ å®Œæˆ!
```

---

## âœ… éªŒè¯ç»“æœ

### 1. æ£€æŸ¥ Storage

è®¿é—® Supabase Dashboard â†’ Storage â†’ `template-thumbnails`

åº”è¯¥çœ‹åˆ°ï¼š
```
template-thumbnails/
â””â”€â”€ style/
    â””â”€â”€ living-room/
        â”œâ”€â”€ 1df50169-533c-4745-9157-902b9e55ffe8.png (Latte)
        â””â”€â”€ 18f2c806-f0f5-435c-acea-e3036c6a16ac.png (Organic)
```

### 2. æ£€æŸ¥æ•°æ®åº“

åœ¨ SQL Editor æ‰§è¡Œï¼š
```sql
SELECT id, name, image_url
FROM design_templates
WHERE id IN (
    '1df50169-533c-4745-9157-902b9e55ffe8',
    '18f2c806-f0f5-435c-acea-e3036c6a16ac'
);
```

åº”è¯¥çœ‹åˆ° `image_url` å·²æ›´æ–°ä¸ºæ–°çš„ Supabase URLã€‚

### 3. æµ‹è¯•å›¾ç‰‡è®¿é—®

å¤åˆ¶ä¸€ä¸ª image_urlï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä½ ä¸Šä¼ çš„å›¾ç‰‡ã€‚

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: è„šæœ¬æŠ¥é”™ "Missing Supabase environment variables"ï¼Ÿ
**A**: ç¡®è®¤ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®ã€‚åœ¨åŒä¸€ä¸ª PowerShell çª—å£ä¸­è¿è¡Œï¼š
```powershell
echo $env:VITE_SUPABASE_URL
echo $env:SUPABASE_SERVICE_ROLE_KEY
```

### Q: ä¸Šä¼ å¤±è´¥ "Bucket not found"ï¼Ÿ
**A**: Storage Bucket è¿˜æ²¡åˆ›å»ºï¼ŒæŒ‰ç…§æ­¥éª¤2åˆ›å»ºã€‚

### Q: æ•°æ®åº“æ›´æ–°å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ template ID æ˜¯å¦æ­£ç¡®ã€‚è¿è¡Œï¼š
```sql
SELECT id, name FROM design_templates WHERE name LIKE '%Latte%' OR name LIKE '%Organic%';
```

### Q: å›¾ç‰‡ä¸Šä¼ æˆåŠŸä½†æ— æ³•è®¿é—®ï¼Ÿ
**A**: ç¡®ä¿ Bucket è®¾ç½®ä¸ºå…¬å¼€è®¿é—® (Public)ã€‚

---

## ğŸ“ è„šæœ¬è¯´æ˜

æˆ‘åˆ›å»ºçš„è„šæœ¬ (`scripts/upload-test-thumbnails.ts`) ä¼šï¼š

1. âœ… è¯»å– `upload/` æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰ PNG æ–‡ä»¶
2. âœ… æ ¹æ®æ–‡ä»¶åæ˜ å°„åˆ°å¯¹åº”çš„æ¨¡æ¿
3. âœ… ä¸Šä¼ åˆ° Supabase Storage (`template-thumbnails` bucket)
4. âœ… è‡ªåŠ¨æ›´æ–° `design_templates` è¡¨çš„ `image_url` å­—æ®µ
5. âœ… æ˜¾ç¤ºè¯¦ç»†çš„è¿›åº¦å’Œç»“æœ

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ä¸Šä¼ æˆåŠŸåï¼š
1. åœ¨ç½‘ç«™ä¸Šæµ‹è¯• Interior Design åŠŸèƒ½
2. é€‰æ‹© Living Room æˆ¿é—´ç±»å‹
3. åº”è¯¥èƒ½çœ‹åˆ°æ–°çš„ç¼©ç•¥å›¾
4. å¦‚æœæ•ˆæœå¥½ï¼Œå¯ä»¥ç»§ç»­ä¸Šä¼ æ›´å¤šæ¨¡æ¿çš„ç¼©ç•¥å›¾

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** éšæ—¶å‘Šè¯‰æˆ‘é‡åˆ°çš„é—®é¢˜ï¼

