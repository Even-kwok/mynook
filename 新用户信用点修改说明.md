# 新用户注册信用点修改说明

## 📋 修改内容

将新用户注册时的默认信用点从 **10点** 改为 **0点**

---

## 🔧 已完成的修改

### 1. 创建新的迁移文件
**文件**: `supabase/migrations/20251011_remove_default_credits.sql`

这个迁移文件会：
- 将 `users` 表的 `credits` 字段默认值从 10 改为 0
- 更新相关注释说明

### 2. 更新原始迁移文件
**文件**: `supabase/migrations/20250109_create_users_auth.sql`

修改内容：
- 第15行：`credits INTEGER DEFAULT 10` → `credits INTEGER DEFAULT 0`
- 更新了注释和会员等级说明

---

## 🚀 部署步骤

### 在 Supabase Dashboard 执行迁移

1. **登录 Supabase Dashboard**
   - 访问: https://supabase.com/dashboard
   - 选择您的项目

2. **打开 SQL Editor**
   - 左侧菜单点击 "SQL Editor"
   - 点击 "New query"

3. **执行以下 SQL**
   ```sql
   -- 修改 credits 字段的默认值为0
   ALTER TABLE public.users 
   ALTER COLUMN credits SET DEFAULT 0;

   -- 更新注释说明
   COMMENT ON COLUMN public.users.credits IS '剩余信用点数，用于生成图片（新用户默认0点）';
   ```

4. **点击 Run 按钮执行**

5. **验证修改**
   ```sql
   -- 查看表结构确认默认值
   SELECT column_name, column_default
   FROM information_schema.columns
   WHERE table_name = 'users' AND column_name = 'credits';
   ```
   应该显示 `0` 作为默认值

---

## ✅ 影响说明

### 新用户
- ✅ 从现在开始注册的新用户将获得 **0** 点初始信用
- ✅ 需要购买信用点套餐或升级会员才能使用功能

### 现有用户
- ✅ **不受影响**，保留现有信用点
- ✅ 已经拥有的10点信用保持不变

### 会员等级
- **Free**: 0 credits 起始，需要购买
- **Pro**: 1000 credits（升级时获得）
- **Premium**: 500 credits/月，优先队列
- **Business**: 无限 credits，专属支持

---

## 📊 后续建议

考虑是否需要：
1. 在首页或注册页面提示用户"新用户无初始信用点"
2. 添加"首次购买优惠"或"新手礼包"来吸引用户
3. 调整购买信用点的套餐价格和数量

---

## 🔄 如何回滚（如需要）

如果需要恢复给新用户10点初始信用，执行：

```sql
ALTER TABLE public.users 
ALTER COLUMN credits SET DEFAULT 10;
```

---

**修改日期**: 2025-10-11  
**修改人**: AI Assistant  
**状态**: ✅ 已完成，等待部署

